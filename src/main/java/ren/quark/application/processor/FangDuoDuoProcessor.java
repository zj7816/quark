/** *dianping.com Inc *Copyright(c)2004-2017 All Rights Reserved. */package ren.quark.application.processor;import us.codecraft.webmagic.Page;import us.codecraft.webmagic.Site;import us.codecraft.webmagic.processor.PageProcessor;import java.util.List;/** * fangduoduo 特定小区内容爬取 * * @author zhangjie * @version $Id: FangDuoDuoProcessor.java, v 0.1 2017-01-05 上午10:34 zhangjie Exp $$ */public class FangDuoDuoProcessor implements PageProcessor {    private Site site = Site.me();    private static final String LIST_REX = "http://esf.fangdd.com/shanghai?query=%E4%BF%9D%E5%88%A9%E5%8F%B6%E4%B8%8A%E6%B5%B7%E4%B8%89%E6%9C%9F%28%E5%85%AC%E5%AF%93%29&city_id=121";    @Override    public void process(Page page) {        List<String> links = page.getHtml().xpath("//div[@class=\"main main--sale-all clearfix\"]").links().regex("http://esf.fangdd.com/shanghai/\\d{0,}\\.html").all();        page.addTargetRequests(links);        if (!page.getUrl().equals(LIST_REX)) {            page.putField("departmentName", page.getHtml().xpath("/html/body/div[3]/div[3]/div[2]/div[2]/h1/span[1]/text()").get());            page.putField("acreage", page.getHtml().xpath("/html/body/div[3]/div[3]/div[2]/div[2]/h1/span[3]/text()").get());            page.putField("totalPrice", page.getHtml().xpath("/html/body/div[3]/div[3]/div[2]/div[2]/div[3]/table/tbody/tr[1]/td[1]/div[2]/span/text()").get());            page.putField("pricePerAcreage", page.getHtml().xpath("/html/body/div[3]/div[3]/div[2]/div[2]/div[3]/table/tbody/tr[2]/td[1]/text()").get());            page.putField("floorDesc", page.getHtml().xpath("/html/body/div[3]/div[3]/div[2]/div[2]/div[3]/table/tbody/tr[2]/td[2]/text()").get());            page.putField("address", page.getHtml().xpath("//*[@id=\"cell-infomation\"]/text()").get());        }    }    @Override    public Site getSite() {        return site;    }}